(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c1f507e"],{"1de4":function(e,t,o){"use strict";o("cf04")},"498a":function(e,t,o){"use strict";var n=o("23e7"),r=o("58a8").trim,a=o("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return r(this)}})},b11d:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),r=function(e){return Object(n["pushScopeId"])("data-v-1fdadc96"),e=e(),Object(n["popScopeId"])(),e},a={class:"gray",style:{width:"100%"}},c={class:"card-header"},i=r((function(){return Object(n["createElementVNode"])("div",null,"IOS版本管理",-1)})),l=Object(n["createTextVNode"])("添加"),d=["href"],u=["innerHTML"],b=["innerHTML"],s=Object(n["createTextVNode"])("是"),f=Object(n["createTextVNode"])("否"),O=Object(n["createTextVNode"])("删除"),m=Object(n["createTextVNode"])("ios_market"),j=Object(n["createTextVNode"])("ios"),p=Object(n["createTextVNode"])("ios_wallet"),V=Object(n["createTextVNode"])("ios_meme_tracker"),h=Object(n["createTextVNode"])("ios_chain_pulse"),v={class:"dialog-footer"},w=Object(n["createTextVNode"])("取 消"),g=Object(n["createTextVNode"])("确 定");function _(e,t,o,r,_,C){var x=Object(n["resolveComponent"])("el-button"),N=Object(n["resolveComponent"])("el-table-column"),k=Object(n["resolveComponent"])("el-tag"),y=Object(n["resolveComponent"])("el-switch"),S=Object(n["resolveComponent"])("el-table"),L=Object(n["resolveComponent"])("el-card"),T=Object(n["resolveComponent"])("el-col"),I=Object(n["resolveComponent"])("el-row"),D=Object(n["resolveComponent"])("el-input"),$=Object(n["resolveComponent"])("el-form-item"),E=Object(n["resolveComponent"])("el-radio"),M=Object(n["resolveComponent"])("el-radio-group"),U=Object(n["resolveComponent"])("el-form"),B=Object(n["resolveComponent"])("el-dialog"),F=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("main",a,[Object(n["createVNode"])(I,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(T,{span:24,style:{"margin-bottom":"10px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(L,{class:"box-card",shadow:"never"},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",c,[i,Object(n["createVNode"])(x,{class:"button",type:"primary",link:"",onClick:Object(n["withModifiers"])(C.handelAdd,["stop"])},{default:Object(n["withCtx"])((function(){return[l]})),_:1},8,["onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(S,{data:_.tableData,stripe:"",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(N,{prop:"version",label:"版本号"}),Object(n["createVNode"])(N,{prop:"created_time",label:"创建时间"},{default:Object(n["withCtx"])((function(t){var o=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatDate(o.created_time)),1)]})),_:1}),Object(n["createVNode"])(N,{prop:"download_link",label:"下载链接"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createElementVNode"])("a",{href:t.download_link,target:"_blank"},Object(n["toDisplayString"])(t.download_link),9,d)]})),_:1}),Object(n["createVNode"])(N,{prop:"remark",label:"升级信息"},{default:Object(n["withCtx"])((function(e){var t,o,r=e.row;return[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",{innerHTML:null===(t=C.jsonFrom((null===r||void 0===r?void 0:r.remark)||""))||void 0===t?void 0:t.cn},null,8,u),Object(n["createElementVNode"])("div",{innerHTML:null===(o=C.jsonFrom((null===r||void 0===r?void 0:r.remark)||""))||void 0===o?void 0:o.en},null,8,b)])]})),_:1}),Object(n["createVNode"])(N,{prop:"app_type",label:"适用平台",align:"center"},{default:Object(n["withCtx"])((function(t){var o=t.row;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.getPlatform(o.app_type)),1)]})),_:1}),Object(n["createVNode"])(N,{prop:"is_forced",label:"是否强制升级",align:"center"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[1===t.is_forced?(Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:0,type:"success"},{default:Object(n["withCtx"])((function(){return[s]})),_:1})):0===t.is_forced?(Object(n["openBlock"])(),Object(n["createBlock"])(k,{key:1,type:"info"},{default:Object(n["withCtx"])((function(){return[f]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(N,{label:"状态",align:"center",width:"200",fixed:"right"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createVNode"])(y,{modelValue:t.is_gatedlaunched,"onUpdate:modelValue":function(e){return t.is_gatedlaunched=e},"active-color":"#13ce66","active-text":"正式发布","inactive-text":"灰度发布","active-value":0,"inactive-value":1,loading:_.loading[t.id],onClick:Object(n["withModifiers"])((function(e){return C.handelState(t)}),["stop"])},null,8,["modelValue","onUpdate:modelValue","loading","onClick"])]})),_:1}),Object(n["createVNode"])(N,{label:"操作",width:"150",align:"center",fixed:"right"},{default:Object(n["withCtx"])((function(e){var t=e.row;return[Object(n["createVNode"])(x,{type:"danger",onClick:Object(n["withModifiers"])((function(e){return C.deleteVersionIOS(t)}),["stop"])},{default:Object(n["withCtx"])((function(){return[O]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])),[[F,_.dataLoading]])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(B,{title:"新增版本",modelValue:_.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=function(e){return _.dialogVisible=e}),width:"600px",top:"5vh","close-on-click-modal":!1,onClosed:C.handelClose},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",v,[Object(n["createVNode"])(x,{onClick:t[6]||(t[6]=function(e){return _.dialogVisible=!1})},{default:Object(n["withCtx"])((function(){return[w]})),_:1}),Object(n["createVNode"])(x,{type:"primary",loading:_.addLoading,onClick:C.addVersionIOS},{default:Object(n["withCtx"])((function(){return[g]})),_:1},8,["loading","onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{"label-position":"left","label-width":"auto",ref:"form",model:_.form,rules:_.rules},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{label:"版本号",prop:"version"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{modelValue:_.form.version,"onUpdate:modelValue":t[0]||(t[0]=function(e){return _.form.version=e}),modelModifiers:{trim:!0},placeholder:"请输入版本号",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])($,{label:"下载链接",prop:"download_link"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{modelValue:_.form.download_link,"onUpdate:modelValue":t[1]||(t[1]=function(e){return _.form.download_link=e}),modelModifiers:{trim:!0},placeholder:"请输入下载链接",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])($,{label:"是否强制升级",prop:"is_forced"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{modelValue:_.form.is_forced,"onUpdate:modelValue":t[2]||(t[2]=function(e){return _.form.is_forced=e}),"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])($,{label:"适用平台",prop:"app_type"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{modelValue:_.form.app_type,"onUpdate:modelValue":t[3]||(t[3]=function(e){return _.form.app_type=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{label:1},{default:Object(n["withCtx"])((function(){return[m]})),_:1}),Object(n["createVNode"])(E,{label:2},{default:Object(n["withCtx"])((function(){return[j]})),_:1}),Object(n["createVNode"])(E,{label:3},{default:Object(n["withCtx"])((function(){return[p]})),_:1}),Object(n["createVNode"])(E,{label:4},{default:Object(n["withCtx"])((function(){return[V]})),_:1}),Object(n["createVNode"])(E,{label:5},{default:Object(n["withCtx"])((function(){return[h]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])($,{label:"版本升级备注信息（中文）",prop:"remark.cn"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{rows:2,autosize:"",type:"textarea",modelValue:_.form.remark.cn,"onUpdate:modelValue":t[4]||(t[4]=function(e){return _.form.remark.cn=e}),placeholder:"请输入版本升级备注信息（中文）",clearable:""},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])($,{label:"版本升级备注信息（英文）",prop:"remark.en"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{rows:2,type:"textarea",autosize:"",modelValue:_.form.remark.en,"onUpdate:modelValue":t[5]||(t[5]=function(e){return _.form.remark.en=e}),placeholder:"请输入版本升级备注信息（英文）",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClosed"])])}var C=o("1da1"),x=o("5530"),N=(o("96cf"),o("d3b7"),o("498a"),o("365c")),k={name:"Version",data:function(){return{form:{version:"",download_link:"",is_forced:0,is_gatedlaunched:1,app_type:4,remark:{cn:"",en:""}},rules:{version:[{required:!0,message:"请输入版本号",trigger:"blur"}],download_link:[{required:!0,message:"请输入下载链接",trigger:"blur"}],"remark.cn":[{required:!0,message:"请输入版本升级备注信息（中文）",trigger:"blur"}],"remark.en":[{required:!0,message:"请输入版本升级备注信息（英文）",trigger:"blur"}]},tableData:[],dataLoading:!0,loading:{},dialogVisible:!1,addLoading:!1,updateLoading:!1}},created:function(){this.getVersionListIOS()},methods:{getVersionListIOS:function(){var e=this;this.dataLoading=!0,Object(N["Ac"])(-1).then((function(t){e.tableData=t||[]})).catch((function(){e.tableData=[]})).finally((function(){e.dataLoading=!1}))},handelClose:function(){this.$refs.form.resetFields()},handelAdd:function(){this.dialogVisible=!0},addVersionIOS:function(){var e=this;this.$refs.form.validate((function(t){if(t){var o,n,r,a,c,i;e.addLoading=!0;var l=Object(x["a"])(Object(x["a"])({},e.form),{},{remark:{cn:(null===(o=e.form)||void 0===o||null===(n=o.remark)||void 0===n||null===(r=n.cn)||void 0===r?void 0:r.trim())||"",en:(null===(a=e.form)||void 0===a||null===(c=a.remark)||void 0===c||null===(i=c.en)||void 0===i?void 0:i.trim())||""}});Object(N["F"])(l).then((function(t){e.$message.success("添加成功"),e.dialogVisible=!1,e.getVersionListIOS()})).catch((function(){e.$message.error("添加失败")})).finally((function(){e.addLoading=!1}))}}))},handelState:function(e){var t=this;this.loading[e.id]=!0,Object(N["Kd"])(e.id,e.is_gatedlaunched).then(function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$message.success("切换成功");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$message.error("切换失败")})).finally((function(){t.loading[e.id]=!1,t.getVersionListIOS()}))},deleteVersionIOS:function(e){var t=this;this.$confirm("是否确认删除此版本号","警告",{type:"warning"}).then((function(){Object(N["sb"])(e.id).then((function(e){t.getVersionListIOS(),t.$message.success("删除成功")}))})).catch((function(){}))},jsonFrom:function(e){try{return""===e?"":JSON.parse(e)}catch(t){return""}},getPlatform:function(e){var t={"-1":"全部",0:"Android",1:"ios_market",2:"ios",3:"ios_wallet",4:"ios_meme_tracker"};return(null===t||void 0===t?void 0:t[e])||""}}},y=(o("1de4"),o("6b0d")),S=o.n(y);const L=S()(k,[["render",_],["__scopeId","data-v-1fdadc96"]]);t["default"]=L},c8d2:function(e,t,o){var n=o("5e77").PROPER,r=o("d039"),a=o("5899"),c="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||c[e]()!==c||n&&a[e].name!==e}))}},cf04:function(e,t,o){}}]);